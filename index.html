<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>Barricade / Malefiz ‚Äî en ligne (mobile)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <style>
    :root {
      --beige: #f5e9d3;
      --line: #7a5a3b;
      --text: #3a2c1f;
      --panel: #fff6e8;
      --accent: #8b5e34;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--beige);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,sans-serif}
    .wrap{min-height:100%;display:flex;flex-direction:column}
    header{padding:12px 16px}
    main{flex:1;display:flex;flex-direction:column;gap:12px;padding:12px}
    .card{background:var(--panel);border:1px solid #e3d4bd;border-radius:14px;padding:14px}
    h1,h2,h3{margin:0 0 8px}
    label{font-size:14px}
    input,select,button{font:inherit;border-radius:12px;border:1px solid #decab0;background:#fff;padding:10px 12px;color:var(--text)}
    button{background:#cfae7e;border-color:#cfae7e;color:#2b1d12;font-weight:700}
    button.primary{background:#b97a2a;border-color:#b97a2a;color:#fff}
    button:disabled{opacity:.55}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .col{display:flex;flex-direction:column;gap:8px}
    .muted{opacity:.7;font-size:12px}
    #menu{display:block}
    #game{display:none}
    #lobbyList{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
    .tag{padding:6px 10px;border-radius:999px;background:#fff;border:1px solid #e3d4bd;font-size:13px}
    .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;vertical-align:-1px}
    #boardWrap{background:#f7ead4;border:1px solid #e3d4bd;border-radius:14px;padding:6px}
    #svg{touch-action:pan-x pan-y;display:block;width:100%;height:auto;background:#f4e3c7;border-radius:10px}
    #side{display:flex;flex-direction:column;gap:8px}
    #players{display:flex;gap:6px;flex-wrap:wrap}
    #log{height:150px;overflow:auto;background:#fff;border:1px solid #eadcc7;border-radius:10px;padding:8px;white-space:pre-wrap;font-size:12px}
    .goal{stroke:#357a38;stroke-width:3;fill:#79c36a}
    .node{fill:#f8efe0;stroke:#a88353;stroke-width:2}
    .edge{stroke:#9c744a;stroke-width:4;stroke-linecap:round}
    .barricade{fill:#ffffff;stroke:#bbb;stroke-width:2}
    .pawn{stroke:#6b4a2e;stroke-width:2}
    .hint{fill:transparent;stroke:#c77d2a;stroke-width:3}
    .clickable{cursor:pointer}
    .homes circle{stroke:#6b4a2e;stroke-width:2}
  </style>
</head>
<body>
<div class="wrap">
  <header></header>
  <main>
    <section id="menu" class="card">
      <h2>Malefiz ‚Äî jouer en ligne</h2>
      <div class="col">
        <div class="row">
          <div class="col" style="flex:1;min-width:180px">
            <label>Pseudo</label>
            <input id="m_name" placeholder="ex: Camille">
          </div>
          <div class="col" style="width:150px">
            <label>Couleur</label>
            <select id="m_color">
              <option value="red">Rouge</option>
              <option value="blue">Bleu</option>
              <option value="green">Vert</option>
              <option value="yellow">Jaune</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col" style="flex:1;min-width:200px">
            <label>Code de partie</label>
            <input id="m_game" placeholder="ex: famille1">
          </div>
        </div>
        <div class="row" style="margin-top:6px">
          <button id="m_create" class="primary">Cr√©er la partie</button>
          <button id="m_join">Rejoindre la partie</button>
        </div>

        <div id="lobby" style="display:none;margin-top:10px">
          <div><strong>Joueurs connect√©s</strong></div>
          <div id="lobbyList"></div>
          <div class="row" style="margin-top:10px">
            <button id="m_start" class="primary">D√©marrer la partie</button>
          </div>
          <div class="muted">Seul l'h√¥te peut d√©marrer. Les couleurs d√©j√† prises sont d√©sactiv√©es.</div>
        </div>
      </div>
    </section>

    <section id="game" class="card">
      <div class="row" style="align-items:center;justify-content:space-between">
        <div class="row" style="gap:12px;align-items:center">
          <button id="roll">üé≤ Lancer le d√©</button>
          <div id="dice">D√© : ‚Äî</div>
          <div>Tour : <strong id="turn">‚Äî</strong></div>
        </div>
        <div class="row" id="players"></div>
      </div>

      <div class="row" style="margin-top:10px">
        <div id="boardWrap" class="col" style="flex:1;min-width:260px">
          <svg id="svg" viewBox="0 0 1000 1100" xmlns="http://www.w3.org/2000/svg">
            <g id="edges"></g>
            <g id="nodes"></g>
            <g class="homes" id="homes"></g>
            <g id="pieces"></g>
          </svg>
        </div>
      </div>

      <div class="col" style="margin-top:10px">
        <div><strong>Journal</strong></div>
        <div id="log"></div>
      </div>
    </section>
  </main>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
  import { getDatabase, ref, set, onValue, update, runTransaction } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

 const firebaseConfig = {

  apiKey: "AIzaSyDqZOF5bsuzH7dH3TvQiY9JknZWXYJsEE4",

  authDomain: "barricade-en-ligne.firebaseapp.com",

  databaseURL: "https://barricade-en-ligne-default-rtdb.europe-west1.firebasedatabase.app",

  projectId: "barricade-en-ligne",

  storageBucket: "barricade-en-ligne.firebasestorage.app",

  messagingSenderId: "1094029683667",

  appId: "1:1094029683667:web:e3d6b9ad3b44b337d29d26"

};


  const app = initializeApp(firebaseConfig);
  const db  = getDatabase(app);

  const mName = document.getElementById('m_name');
  const mColor = document.getElementById('m_color');
  const mGame = document.getElementById('m_game');
  const mCreate = document.getElementById('m_create');
  const mJoin = document.getElementById('m_join');
  const mStart = document.getElementById('m_start');
  const lobby = document.getElementById('lobby');
  const lobbyList = document.getElementById('lobbyList');
  const menu = document.getElementById('menu');
  const game = document.getElementById('game');

  const urlParams = new URLSearchParams(location.search);
  if(urlParams.get('game')) mGame.value = urlParams.get('game');

  let ME = "", MYCOLOR = "red", gameRef = null, IS_HOST = false;
  const COLORS = { red:"#e74b4b", blue:"#3a7bff", green:"#2fbf71", yellow:"#e5c14b" };

  function log(t){
    const logEl = document.getElementById('log');
    const time = new Date().toLocaleTimeString();
    logEl.textContent = `[${time}] ${t}
` + logEl.textContent;
  }

  function blankState(){
    return {
      host: "", started:false,
      order:[], turnIndex:0, dice:0, winner:"",
      players:{}, colors:{ red:false, blue:false, green:false, yellow:false },
      barricades: []
    };
  }
  function ensureShape(st){
    if(!st) st = blankState();
    if(!st.players) st.players = {};
    if(!st.colors) st.colors = { red:false, blue:false, green:false, yellow:false };
    if(!Array.isArray(st.order)) st.order = [];
    if(typeof st.turnIndex !== "number") st.turnIndex = 0;
    if(typeof st.dice !== "number") st.dice = 0;
    if(!Array.isArray(st.barricades)) st.barricades = [];
    if(typeof st.host !== "string") st.host = "";
    if(typeof st.winner !== "string") st.winner = "";
    return st;
  }
  function setColorSelect(state){
    const used = (state && state.colors) ? state.colors : {};
    for(const opt of [...mColor.options]) opt.disabled = !!used[opt.value];
  }

  async function createGame(){
    const id = (mGame.value||"").trim(); if(!id) return alert("Entre un code de partie.");
    const name = (mName.value||"").trim(); if(!name) return alert("Entre un pseudo.");
    const color = mColor.value;
    ME = name; MYCOLOR = color; IS_HOST = true;
    gameRef = ref(db, "games/"+id);
    await set(gameRef, blankState());
    await runTransaction(gameRef, (st)=>{
      st = ensureShape(st);
      if(st.players[name]) return st;
      st.host = name;
      st.players[name] = { color, pawns: Array.from({length:5}).map(()=>({pos:"home",atHome:true})), won:false };
      st.colors[color] = true;
      st.order = st.order.length ? st.order : [name];
      return st;
    });
    subscribe(id);
    showLobby(true);
    history.replaceState(null, "", location.pathname + "?game=" + encodeURIComponent(id));
    log("Salle cr√©√©e. Partage ce lien et attends les joueurs.");
  }
  async function joinGame(){
    const id = (mGame.value||"").trim(); if(!id) return alert("Entre un code de partie.");
    const name = (mName.value||"").trim(); if(!name) return alert("Entre un pseudo.");
    const color = mColor.value;
    ME = name; MYCOLOR = color; IS_HOST = false;
    gameRef = ref(db, "games/"+id);
    await runTransaction(gameRef, (st)=>{
      st = ensureShape(st);
      if(st.started){ alert("La partie a d√©j√† d√©marr√©."); return; }
      if(st.players[name]){ alert("Ce pseudo est d√©j√† pris."); return; }
      if(st.colors[color]){ alert("Cette couleur est d√©j√† prise."); return; }
      st.players[name] = { color, pawns: Array.from({length:5}).map(()=>({pos:"home",atHome:true})), won:false };
      st.colors[color] = true;
      st.order.push(name);
      return st;
    });
    subscribe(id);
    showLobby(false);
    history.replaceState(null, "", location.pathname + "?game=" + encodeURIComponent(id));
    log("Rejoint la salle. En attente du d√©marrage...");
  }
  function showLobby(asHost){
    menu.style.display = "block";
    lobby.style.display = "block";
    mStart.style.display = asHost ? "inline-block" : "none";
  }
  function showGame(){ menu.style.display = "none"; game.style.display = "block"; }

  mCreate.addEventListener('click', createGame);
  mJoin.addEventListener('click', joinGame);
  mStart.addEventListener('click', async ()=>{
    if(!IS_HOST) return;
    await runTransaction(gameRef, (st)=>{
      st = ensureShape(st);
      if(st.host!==ME) return st;
      if(Object.keys(st.players).length < 2){ alert("Il faut au moins 2 joueurs."); return; }
      st.started = true; st.dice = 0; st.turnIndex = 0; st.winner = "";
      st.barricades = ["t4","t18","m4","m8","m12","m16","m20","p3_0","p3_3","p3_6","p1_1"];
      return st;
    });
  });

  function subscribe(id){
    const gref = ref(db, "games/"+id);
    onValue(gref, (snap)=>{
      const st = ensureShape(snap.val());
      setColorSelect(st);
      lobbyList.innerHTML="";
      Object.entries(st.players||{}).forEach(([name,pl])=>{
        const tag = document.createElement('div'); tag.className="tag";
        tag.innerHTML = `<span class="dot" style="background:${COLORS[pl.color]}"></span>${name}`;
        lobbyList.appendChild(tag);
      });
      if(st.started){ showGame(); }
      drawState(st);
      enableTurn(st);
      if(st._mustPlaceBarricade && st._placer===ME) enableBarricadePlacement(st);
    });
  }

  const svg = document.getElementById('svg');
  const G_EDGES = document.getElementById('edges');
  const G_NODES = document.getElementById('nodes');
  const G_HOMES = document.getElementById('homes');
  const G_PIECES = document.getElementById('pieces');
  const diceEl = document.getElementById('dice');
  const turnEl = document.getElementById('turn');
  const playersEl = document.getElementById('players');

  function line(idPrefix, startX, startY, count, stepX=30, stepY=0){
    const arr=[]; for(let i=0;i<count;i++){ arr.push({ id:`${idPrefix}${i}`, x:startX+i*stepX, y:startY+i*stepY }); } return arr;
  }
  const topLane = line("t", 120, 120, 23, 34, 0);
  const topStem = line("g", 120+34*11, 150, 3, 0, 46);
  const pyr1 = line("p1_", 400, 360, 3, 90, 0);
  const pyr2 = line("p2_", 355, 420, 5, 90, 0);
  const pyr3 = line("p3_", 310, 480, 7, 90, 0);
  const midLane = line("m", 120, 560, 23, 34, 0);
  const leftStem  = line("ls", 120, 560, 4, 0, 60);
  const rightStem = line("rs", 120+34*22, 560, 4, 0, 60);
  const leftLoop  = line("ll", 120, 560+60*3, 6, 34, 0);
  const rightLoop = line("rl", 120+34*17, 560+60*3, 6, 34, 0);

  const starts = {
    green:  line("hg", 200, 860, 5, 34, 0).map(n=>({id:n.id,x:n.x,y:n.y,home:"green"})),
    red:    line("hr", 200+34*6, 860, 5, 34, 0).map(n=>({id:n.id,x:n.x,y:n.y,home:"red"})),
    yellow: line("hy", 200+34*12,860, 5, 34, 0).map(n=>({id:n.id,x:n.x,y:n.y,home:"yellow"})),
    blue:   line("hb", 200+34*18,860, 5, 34, 0).map(n=>({id:n.id,x:n.x,y:n.y,home:"blue"}))
  };
  const nodes = [...topLane, ...topStem, ...pyr1, ...pyr2, ...pyr3, ...midLane, ...leftStem, ...rightStem, ...leftLoop, ...rightLoop];
  const NODE = Object.fromEntries(nodes.map(n=>[n.id,n]));
  const adj = {};
  function connect(a,b){ (adj[a]||(adj[a]=[])).push(b); (adj[b]||(adj[b]=[])).push(a); }
  for(let i=0;i<topLane.length-1;i++) connect(topLane[i].id, topLane[i+1].id);
  connect("t11","g0"); connect("g0","g1"); connect("g1","g2"); connect("g2","p1_1");
  for(let i=0;i<pyr1.length-1;i++) connect(pyr1[i].id,pyr1[i+1].id);
  for(let i=0;i<pyr2.length-1;i++) connect(pyr2[i].id,pyr2[i+1].id);
  for(let i=0;i<pyr3.length-1;i++) connect(pyr3[i].id,pyr3[i+1].id);
  connect("p1_0","p2_1"); connect("p1_1","p2_2"); connect("p1_2","p2_3");
  connect("p2_0","p3_1"); connect("p2_1","p3_2"); connect("p2_2","p3_3"); connect("p2_3","p3_4"); connect("p2_4","p3_5");
  connect("p3_0","m7"); connect("p3_6","m15");
  for(let i=0;i<midLane.length-1;i++) connect(midLane[i].id, midLane[i+1].id);
  connect("m0","ls0"); connect("ls0","ls1"); connect("ls1","ls2"); connect("ls2","ls3"); connect("ls3","ll0");
  connect("m22","rs0"); connect("rs0","rs1"); connect("rs1","rs2"); connect("rs2","rs3"); connect("rs3","rl0");
  for(let i=0;i<leftLoop.length-1;i++) connect(leftLoop[i].id,leftLoop[i+1].id);
  for(let i=0;i<rightLoop.length-1;i++) connect(rightLoop[i].id,rightLoop[i+1].id);

  const ENTRY = { green:"m5", red:"m11", yellow:"m17", blue:"m21" };

  function drawEdges(){
    G_EDGES.innerHTML="";
    for(const [a,ns] of Object.entries(adj)){
      const A = NODE[a]; if(!A) continue;
      ns.forEach(b=>{
        const B = NODE[b]; if(!B) return;
        if(a > b) return;
        const line = document.createElementNS("http://www.w3.org/2000/svg","line");
        line.setAttribute("x1",A.x); line.setAttribute("y1",A.y);
        line.setAttribute("x2",B.x); line.setAttribute("y2",B.y);
        line.setAttribute("class","edge");
        G_EDGES.appendChild(line);
      });
    }
  }
  function drawNodes(){
    G_NODES.innerHTML="";
    for(const n of nodes){
      const c = document.createElementNS("http://www.w3.org/2000/svg","circle");
      c.setAttribute("cx", n.x); c.setAttribute("cy", n.y); c.setAttribute("r", 12);
      c.setAttribute("class","node");
      c.dataset.id = n.id;
      G_NODES.appendChild(c);
    }
    const mid = topLane[11];
    const goal = document.createElementNS("http://www.w3.org/2000/svg","circle");
    goal.setAttribute("cx", mid.x); goal.setAttribute("cy", mid.y-52);
    goal.setAttribute("r", 14); goal.setAttribute("class","goal");
    goal.dataset.id="GOAL"; G_NODES.appendChild(goal);
    NODE["GOAL"] = {id:"GOAL",x:mid.x,y:mid.y-52};
    connect("GOAL","t11");
  }
  function drawHomes(){
    G_HOMES.innerHTML="";
    const map = { green:starts.green, red:starts.red, yellow:starts.yellow, blue:starts.blue };
    Object.entries(map).forEach(([col,list])=>{
      list.forEach((p)=>{
        const cir = document.createElementNS("http://www.w3.org/2000/svg","circle");
        cir.setAttribute("cx",p.x); cir.setAttribute("cy",p.y); cir.setAttribute("r","13");
        cir.setAttribute("fill", COLORS[col]);
        G_HOMES.appendChild(cir);
      });
    });
  }
  function occupiedSet(players){ const s=new Set(); for(const pl of Object.values(players||{})){ pl.pawns.forEach(p=>{ if(!p.atHome) s.add(p.pos); }); } return s; }
  function drawState(st){
    playersEl.innerHTML="";
    Object.entries(st.players||{}).forEach(([name,pl])=>{
      const tag=document.createElement("div"); tag.className="tag"; tag.innerHTML=`<span class="dot" style="background:${COLORS[pl.color]}"></span>${name}`; playersEl.appendChild(tag);
    });
    diceEl.textContent = "D√© : " + (st.dice||"‚Äî"); turnEl.textContent = (st.order[st.turnIndex]||"‚Äî") + ((st.order[st.turnIndex]===ME)?" (√† toi)":"");
    drawEdges(); drawNodes(); drawHomes();
    G_PIECES.innerHTML="";
    (st.barricades||[]).forEach(id=>{
      const n = NODE[id]; if(!n) return;
      const b = document.createElementNS("http://www.w3.org/2000/svg","circle");
      b.setAttribute("cx", n.x); b.setAttribute("cy", n.y); b.setAttribute("r","10");
      b.setAttribute("class","barricade");
      G_PIECES.appendChild(b);
    });
    for(const [name,pl] of Object.entries(st.players||{})){
      for(let i=0;i<pl.pawns.length;i++){
        const p=pl.pawns[i]; let x,y;
        if(p.atHome){ const S={green:starts.green[i], red:starts.red[i], yellow:starts.yellow[i], blue:starts.blue[i]}[pl.color]; x=S.x; y=S.y; }
        else { const n=NODE[p.pos]; if(!n) continue; x=n.x; y=n.y; }
        const c=document.createElementNS("http://www.w3.org/2000/svg","circle");
        c.setAttribute("cx",x); c.setAttribute("cy",y); c.setAttribute("r","12");
        c.setAttribute("fill",COLORS[pl.color]); c.setAttribute("class","pawn");
        G_PIECES.appendChild(c);
        const t=document.createElementNS("http://www.w3.org/2000/svg","text");
        t.setAttribute("x",x); t.setAttribute("y",y+4); t.setAttribute("text-anchor","middle"); t.setAttribute("font-size","10"); t.textContent=(i+1);
        G_PIECES.appendChild(t);
      }
    }
  }
  function reachable(start, steps, blockedSet){
    let cur=new Set([start]); for(let s=0;s<steps;s++){ const nxt=new Set(); for(const k of cur){ for(const n of (adj[k]||[])){ if(blockedSet.has(n)) continue; nxt.add(n); } } cur=nxt; } return cur;
  }
  const rollBtn = document.getElementById('roll');
  rollBtn.addEventListener('click', async ()=>{
    if(!gameRef) return alert("Rejoins ou cr√©e une partie.");
    await runTransaction(gameRef,(st)=>{ st=ensureShape(st); if(!st.started) return st; if(st.order[st.turnIndex]!==ME) return st; st.dice=Math.floor(Math.random()*6)+1; return st; });
  });
  function enableTurn(st){
    if(!st.started) return;
    if((st.order[st.turnIndex]||"")!==ME || !st.dice) return;
    const me = st.players[ME]; if(!me) return;
    const occ = occupiedSet(st.players);
    const blocked = new Set([...(st.barricades||[]), ...occ]);
    me.pawns.forEach((p,idx)=>{
      const start = p.atHome ? ENTRY[me.color] : p.pos;
      if(p.atHome && blocked.has(start)) return;
      if(!p.atHome) blocked.delete(start);
      const dests = Array.from(reachable(start, st.dice, blocked));
      if(start==="t11" && st.dice===1) dests.push("GOAL");
      const legal = dests.filter(k=>k==="GOAL" || NODE[k]);
      let x,y;
      if(p.atHome){ const S={green:starts.green[idx], red:starts.red[idx], yellow:starts.yellow[idx], blue:starts.blue[idx]}[me.color]; x=S.x; y=S.y; }
      else { const n=NODE[p.pos]; if(!n) return; x=n.x; y=n.y; }
      const origin=document.createElementNS("http://www.w3.org/2000/svg","circle");
      origin.setAttribute("cx",x); origin.setAttribute("cy",y); origin.setAttribute("r","16");
      origin.setAttribute("class","hint clickable");
      origin.addEventListener("click",()=>{ clearHints(); showTargets(legal,(dest)=>movePawn(idx,dest)); });
      G_PIECES.appendChild(origin);
    });
  }
  function clearHints(){ [...svg.querySelectorAll(".hint")].forEach(n=>n.remove()); }
  function showTargets(keys,onPick){
    keys.forEach(k=>{
      const n = NODE[k] || NODE["GOAL"];
      const c=document.createElementNS("http://www.w3.org/2000/svg","circle");
      c.setAttribute("cx",n.x); c.setAttribute("cy",n.y); c.setAttribute("r","16");
      c.setAttribute("class","hint clickable");
      c.addEventListener("click",()=>onPick(k),{once:true});
      G_PIECES.appendChild(c);
    });
  }
  function movePawn(idx, dest){
    runTransaction(gameRef,(st)=>{
      st=ensureShape(st); if(!st.started) return st; if(st.order[st.turnIndex]!==ME) return st;
      const me=st.players[ME]; if(!me) return st; const p=me.pawns[idx];
      const start = p.atHome ? ENTRY[me.color] : p.pos;
      const occ = occupiedSet(st.players); const blocked = new Set([...(st.barricades||[]), ...occ]);
      if(p.atHome && blocked.has(start)) return st; if(!p.atHome) blocked.delete(start);
      const dests = Array.from(reachable(start, st.dice, blocked)); if(start==="t11" && st.dice===1) dests.push("GOAL"); if(!dests.includes(dest)) return st;
      for(const [opName,op] of Object.entries(st.players)){ if(opName===ME) continue; op.pawns.forEach(opP=>{ if(!opP.atHome && opP.pos===dest){ opP.atHome=true; opP.pos="home"; } }); }
      p.atHome=false; p.pos=dest;
      if(dest==="GOAL"){ st.winner=ME; }
      const bIndex = (st.barricades||[]).indexOf(dest);
      if(bIndex>=0){ st.barricades.splice(bIndex,1); st._mustPlaceBarricade=true; st._placer=ME; }
      else { st.dice=0; if(!st.winner) st.turnIndex=(st.turnIndex+1)%st.order.length; }
      return st;
    });
    clearHints();
  }
  function enableBarricadePlacement(st){
    const occ = occupiedSet(st.players);
    const choices = Object.keys(NODE).filter(id=>NODE[id] && id!=="GOAL" && !occ.has(id));
    showTargets(choices,(dest)=>{
      runTransaction(gameRef,(S)=>{
        S=ensureShape(S);
        if(!S._mustPlaceBarricade || S._placer!==ME) return S;
        if(!NODE[dest] || dest==="GOAL") return S;
        if(occupiedSet(S.players).has(dest)) return S;
        S.barricades.push(dest);
        S._mustPlaceBarricade=false; S._placer="";
        S.dice=0; if(!S.winner) S.turnIndex=(S.turnIndex+1)%S.order.length;
        return S;
      });
      clearHints();
    });
    log("Place la barricade r√©cup√©r√©e (pion blanc) sur une case libre du chemin.");
  }
</script>
</body>
</html>
